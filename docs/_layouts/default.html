<!DOCTYPE html>
<html lang="{{ page.lang | default: 'en' }}">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    {% seo %}
    <!-- Google Analytics 4 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8RN9K306PY"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-8RN9K306PY');
    </script>
    <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
    <link rel="icon" type="image/png" href="/assets/images/favicon.png">
    {% if page.page_id %}
    {% if page.page_id == 'index' %}
    <link rel="alternate" hreflang="en"    href="{{ site.url }}/" />
    <link rel="alternate" hreflang="fr"    href="{{ site.url }}/fr/" />
    <link rel="alternate" hreflang="de"    href="{{ site.url }}/de/" />
    <link rel="alternate" hreflang="es"    href="{{ site.url }}/es/" />
    <link rel="alternate" hreflang="ru"    href="{{ site.url }}/ru/" />
    <link rel="alternate" hreflang="ja"    href="{{ site.url }}/ja/" />
    <link rel="alternate" hreflang="zh-CN" href="{{ site.url }}/zh-CN/" />
    <link rel="alternate" hreflang="zh-TW" href="{{ site.url }}/zh-TW/" />
    <link rel="alternate" hreflang="it"    href="{{ site.url }}/it/" />
    <link rel="alternate" hreflang="pt"    href="{{ site.url }}/pt/" />
    <link rel="alternate" hreflang="nl"    href="{{ site.url }}/nl/" />
    <link rel="alternate" hreflang="pt-BR" href="{{ site.url }}/pt-BR/" />
    <link rel="alternate" hreflang="tl"    href="{{ site.url }}/tl/" />
    <link rel="alternate" hreflang="x-default" href="{{ site.url }}/" />
    {% else %}
    <link rel="alternate" hreflang="en"    href="{{ site.url }}/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="fr"    href="{{ site.url }}/fr/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="de"    href="{{ site.url }}/de/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="es"    href="{{ site.url }}/es/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="ru"    href="{{ site.url }}/ru/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="ja"    href="{{ site.url }}/ja/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="zh-CN" href="{{ site.url }}/zh-CN/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="zh-TW" href="{{ site.url }}/zh-TW/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="it"    href="{{ site.url }}/it/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="pt"    href="{{ site.url }}/pt/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="nl"    href="{{ site.url }}/nl/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="pt-BR" href="{{ site.url }}/pt-BR/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="tl"    href="{{ site.url }}/tl/{{ page.page_id }}/" />
    <link rel="alternate" hreflang="x-default" href="{{ site.url }}/{{ page.page_id }}/" />
    {% endif %}
    {% endif %}
    <style>
      body {
        margin: 0;
        padding-top: 70px; /* Space for fixed header */
      }

      /* Reset Cayman header styling */
      .page-header {
        background: none;
        padding: 0;
        margin: 0;
      }

      /* Sticky navigation bar */
      .top-nav {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: #f5f5f5;
        border-bottom: 1px solid #ddd;
        padding: 0.5em 2em;
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 0.9em;
        z-index: 1000;
      }

      .nav-logo {
        height: 104px;
        width: auto;
      }

      .nav-links {
        flex: 1;
        text-align: center;
      }

      .nav-links a {
        color: #0366d6;
        text-decoration: none;
        margin: 0 0.75em;
        font-weight: 500;
      }

      .nav-links a:hover {
        text-decoration: underline;
      }

      /* Language Switcher */
      .lang-switcher {
        position: relative;
        display: inline-block;
        flex-shrink: 0;
      }

      .lang-switcher-btn {
        background: transparent;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 5px 10px;
        cursor: pointer;
        font-size: 0.85em;
        color: #444;
        white-space: nowrap;
        font-family: inherit;
      }

      .lang-switcher-btn:hover {
        background: #eee;
      }

      .lang-dropdown {
        display: none;
        position: absolute;
        right: 0;
        top: calc(100% + 4px);
        background: #fff;
        border: 1px solid #ddd;
        border-radius: 4px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        z-index: 1001;
        min-width: 170px;
        padding: 4px 0;
      }

      .lang-dropdown a {
        display: block;
        padding: 7px 14px;
        text-decoration: none;
        color: #333;
        font-size: 0.9em;
      }

      .lang-dropdown a:hover {
        background: #f5f5f5;
      }

      .lang-switcher.open .lang-dropdown {
        display: block;
      }

      /* Main content styling */
      .main-content {
        max-width: 64rem;
        padding: 2rem 1rem;
        margin: 0 auto;
      }

      .site-footer {
        padding: 2rem 1rem;
        margin-top: 2rem;
        border-top: solid 1px #eff0f1;
        text-align: center;
        color: #666;
        font-size: 0.9em;
      }

      /* Mobile responsiveness */
      @media (max-width: 768px) {
        .top-nav {
          flex-direction: column;
          padding: 0.5em 1em;
        }

        .nav-logo {
          margin-bottom: 0.5em;
        }

        .nav-links {
          font-size: 0.85em;
        }

        .lang-switcher {
          margin-top: 0.5em;
        }

        body {
          padding-top: 130px;
        }
      }
    </style>
  </head>
  <body>
    {% if page.lang and page.lang != 'en' %}{% assign lp = page.lang | prepend: '/' %}{% else %}{% assign lp = '' %}{% endif %}
    <nav class="top-nav">
      <img src="/assets/images/logo-icon.svg" alt="NumiSync Wizard" class="nav-logo" />
      <div class="nav-links">
        <a id="nav-home" href="{{ lp }}/">Home</a> &bull;
        <a id="nav-about" href="#about">About</a> &bull;
        <a id="nav-features" href="#features">Features</a> &bull;
        <a id="nav-download" href="{{ lp }}/download">Download</a> &bull;
        <a id="nav-quickstart" href="#quick-start">Quick Start</a> &bull;
        <a id="nav-support" href="{{ lp }}/license">Support</a> &bull;
        <a id="nav-docs" href="#documentation">Docs</a>
      </div>
      <div class="lang-switcher" id="langSwitcher">
        <button class="lang-switcher-btn" onclick="toggleLangDropdown(event)" aria-label="Select language">
          <span id="currentLangLabel">English</span> &#9662;
        </button>
        <div class="lang-dropdown" id="langDropdown"></div>
      </div>
    </nav>

    <main class="main-content" role="main">
      {{ content }}

      <footer class="site-footer">
        <p>Created by Shane Burkhardt (<a href="https://github.com/inguy24">@inguy24</a>) &bull; MIT License &bull; Version {{ site.github.latest_release.tag_name | remove: "v" }}</p>
        <p>
          <a href="https://github.com/inguy24/Numisync-Wizard">GitHub</a> &bull;
          <a id="footer-report" href="https://github.com/inguy24/Numisync-Wizard/issues">Report an Issue</a> &bull;
          <a href="https://github.com/inguy24/Numisync-Wizard/discussions">Discussions</a> &bull;
          <a id="footer-privacy" href="/privacy">Privacy Policy</a>
        </p>
        <p style="margin-top: 1em; font-size: 0.85em; color: #888;">
          Windows releases are code-signed via <a href="https://signpath.org/" target="_blank">SignPath Foundation</a> for open source projects
        </p>
      </footer>
    </main>

    <script>
    (function() {
      // Language names with flag emojis (surrogate pairs for JS string safety)
      var LANGS = {
        'en':    '\uD83C\uDDEC\uD83C\uDDE7 English',
        'fr':    '\uD83C\uDDEB\uD83C\uDDF7 Fran\u00e7ais',
        'de':    '\uD83C\uDDE9\uD83C\uDDEA Deutsch',
        'es':    '\uD83C\uDDEA\uD83C\uDDF8 Espa\u00f1ol',
        'ru':    '\uD83C\uDDF7\uD83C\uDDFA \u0420\u0443\u0441\u0441\u043a\u0438\u0439',
        'ja':    '\uD83C\uDDEF\uD83C\uDDF5 \u65e5\u672c\u8a9e',
        'zh-CN': '\uD83C\uDDE8\uD83C\uDDF3 \u4e2d\u6587\uff08\u7b80\u4f53\uff09',
        'zh-TW': '\uD83C\uDDF9\uD83C\uDDFC \u4e2d\u6587\uff08\u7e41\u9ad4\uff09',
        'it':    '\uD83C\uDDEE\uD83C\uDDF9 Italiano',
        'pt':    '\uD83C\uDDF5\uD83C\uDDF9 Portugu\u00eas',
        'nl':    '\uD83C\uDDF3\uD83C\uDDF1 Nederlands',
        'pt-BR': '\uD83C\uDDE7\uD83C\uDDF7 Portugu\u00eas (Brasil)',
        'tl':    '\uD83C\uDDF5\uD83C\uDDED Filipino'
      };

      // Nav link translations: [Home, About, Features, Download, Quick Start, Support, Docs]
      var NAV_LABELS = {
        'en': ['Home','About','Features','Download','Quick Start','Support','Docs'],
        'fr': ['Accueil','\u00c0 propos','Fonctionnalit\u00e9s','T\u00e9l\u00e9charger','D\u00e9marrage','Support','Docs'],
        'de': ['Startseite','\u00dcber','Funktionen','Herunterladen','Schnellstart','Support','Docs'],
        'es': ['Inicio','Acerca','Funciones','Descargar','Inicio r\u00e1pido','Soporte','Docs'],
        'ru': ['\u0413\u043b\u0430\u0432\u043d\u0430\u044f','\u041e \u043d\u0430\u0441','\u0424\u0443\u043d\u043a\u0446\u0438\u0438','\u0421\u043a\u0430\u0447\u0430\u0442\u044c','\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0441\u0442\u0430\u0440\u0442','\u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0430','\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u044b'],
        'ja': ['\u30db\u30fc\u30e0','\u6982\u8981','\u6a5f\u80fd','\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9','\u30af\u30a4\u30c3\u30af\u30b9\u30bf\u30fc\u30c8','\u30b5\u30dd\u30fc\u30c8','\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8'],
        'zh-CN': ['\u9996\u9875','\u5173\u4e8e','\u529f\u80fd','\u4e0b\u8f7d','\u5feb\u901f\u5f00\u59cb','\u652f\u6301','\u6587\u6863'],
        'zh-TW': ['\u9996\u9801','\u95dc\u65bc','\u529f\u80fd','\u4e0b\u8f09','\u5feb\u901f\u958b\u59cb','\u652f\u63f4','\u6587\u4ef6'],
        'it': ['Home','Info','Funzionalit\u00e0','Download','Avvio rapido','Supporto','Docs'],
        'pt': ['In\u00edcio','Sobre','Recursos','Baixar','In\u00edcio r\u00e1pido','Suporte','Docs'],
        'nl':    ['Home','Over','Functies','Downloaden','Snel starten','Ondersteuning','Docs'],
        'pt-BR': ['In\u00edcio','Sobre','Recursos','Baixar','In\u00edcio R\u00e1pido','Suporte','Docs'],
        'tl':    ['Tahanan','Tungkol','Mga Tampok','I-download','Mabilis na Simula','Suporta','Docs']
      };

      // Footer link translations: [Report an Issue, Privacy Policy]
      var FOOTER_LABELS = {
        'en': ['Report an Issue','Privacy Policy'],
        'fr': ['Signaler un probl\u00e8me','Politique de confidentialit\u00e9'],
        'de': ['Problem melden','Datenschutz'],
        'es': ['Reportar un problema','Pol\u00edtica de privacidad'],
        'ru': ['\u0421\u043e\u043e\u0431\u0449\u0438\u0442\u044c \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435','\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438'],
        'ja': ['\u554f\u984c\u3092\u5831\u544a','\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u30dd\u30ea\u30b7\u30fc'],
        'zh-CN': ['\u62a5\u544a\u95ee\u9898','\u9690\u79c1\u653f\u7b56'],
        'zh-TW': ['\u56de\u5831\u554f\u984c','\u96b1\u79c1\u653f\u7b56'],
        'it': ['Segnala un problema','Informativa sulla privacy'],
        'pt': ['Reportar um problema','Pol\u00edtica de privacidade'],
        'nl':    ['Probleem melden','Privacybeleid'],
        'pt-BR': ['Reportar um problema','Pol\u00edtica de privacidade'],
        'tl':    ['Mag-ulat ng Isyu','Patakaran sa Privacy']
      };

      var currentLang = '{{ page.lang | default: "en" }}';
      var currentPageId = '{{ page.page_id | default: "" }}';

      // Set current lang label in button
      var label = document.getElementById('currentLangLabel');
      if (label && LANGS[currentLang]) label.textContent = LANGS[currentLang];

      // Build per-language URL â€” no trailing slash on non-index pages (matches Jekyll default permalink)
      function langPath(code) {
        var pagePart = (currentPageId && currentPageId !== 'index') ? currentPageId : '';
        return code === 'en'
          ? '/' + pagePart
          : '/' + code + '/' + pagePart;
      }

      // Populate dropdown
      var dropdown = document.getElementById('langDropdown');
      if (dropdown) {
        Object.keys(LANGS).forEach(function(code) {
          if (code === currentLang) return;
          var a = document.createElement('a');
          a.textContent = LANGS[code];
          a.href = langPath(code);
          a.addEventListener('click', function() {
            localStorage.setItem('numisync_lang', code);
          });
          dropdown.appendChild(a);
        });
      }

      // Auto-detection: runs only on first visit (no saved preference)
      var savedLang = localStorage.getItem('numisync_lang');
      if (!savedLang) {
        var raw = (navigator.language || '').toLowerCase();
        var localeMap = {
          'zh-tw': 'zh-TW', 'zh-hk': 'zh-TW', 'zh-mo': 'zh-TW',
          'zh-cn': 'zh-CN', 'zh-sg': 'zh-CN', 'zh': 'zh-CN',
          'pt-br': 'pt-BR', 'pt-pt': 'pt', 'pt': 'pt',
          'tl': 'tl', 'fil': 'tl'
        };
        var supported = ['fr', 'de', 'es', 'ru', 'ja', 'it', 'nl', 'tl'];
        var lang = localeMap[raw] || localeMap[raw.slice(0, 2)] ||
          (supported.indexOf(raw.slice(0, 2)) !== -1 ? raw.slice(0, 2) : null);
        if (lang && lang !== currentLang) {
          window.location.replace(langPath(lang));
        }
      }

      // Apply nav translations
      var navIds = ['nav-home','nav-about','nav-features','nav-download','nav-quickstart','nav-support','nav-docs'];
      var navT = NAV_LABELS[currentLang] || NAV_LABELS['en'];
      navIds.forEach(function(id, i) {
        var el = document.getElementById(id);
        if (el && navT[i]) el.textContent = navT[i];
      });

      // Apply footer translations
      var footerT = FOOTER_LABELS[currentLang] || FOOTER_LABELS['en'];
      var el;
      el = document.getElementById('footer-report');  if (el) el.textContent = footerT[0];
      el = document.getElementById('footer-privacy'); if (el) el.textContent = footerT[1];
    })();

    function toggleLangDropdown(e) {
      e.stopPropagation();
      document.getElementById('langSwitcher').classList.toggle('open');
    }

    document.addEventListener('click', function() {
      var sw = document.getElementById('langSwitcher');
      if (sw) sw.classList.remove('open');
    });
    </script>
  </body>
</html>
