# Electron Builder Configuration
# See: https://www.electron.build/configuration/configuration

appId: com.numisync.wizard
productName: NumiSync Wizard
executableName: NumiSyncWizard
copyright: Copyright 2026 Shane Burkhardt

# Directories
directories:
  output: dist
  buildResources: build

# Files to include in the app
files:
  - src/**/*
  - package.json
  - node_modules/**/*
  - "!node_modules/*/{CHANGELOG.md,README.md,readme.md,test,__tests__,tests,*.md}"
  - "!**/*.{iml,o,hprof,orig,pyc,pyo,rbc,swp,csproj,sln,xproj}"
  - "!**/._*"
  - "!**/{.DS_Store,.git,.hg,.svn,CVS,RCS,SCCS,.gitignore,.gitattributes}"

# Extra resources (accessible via process.resourcesPath)
extraResources:
  - from: EULA.txt
    to: EULA.txt

# Windows-specific configuration
win:
  target:
    - target: nsis
      arch:
        - x64
  icon: build/icon.ico

# NSIS installer configuration
nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: NumiSync Wizard
  uninstallDisplayName: NumiSync Wizard
  license: build/eula/eula-windows.rtf
  include: build/installer.nsh
  installerIcon: build/icon.ico
  uninstallerIcon: build/icon.ico
  installerHeaderIcon: build/icon.ico
  deleteAppDataOnUninstall: false

# ============================================
# MICROSOFT STORE CONFIGURATION (MSIX)
# ============================================
appx:
  # Identity - must be unique in Microsoft Store
  identityName: ShaneBurkhardt.NumiSyncWizard
  publisher: CN=63DF2FB3-6EDC-4553-939D-B99BBA2EDAE8  # From Microsoft Partner Center
  publisherDisplayName: Shane Burkhardt
  displayName: NumiSync Wizard

  # Application settings
  applicationId: NumiSyncWizard
  backgroundColor: transparent
  showNameOnTiles: true

  # Target Windows 10 version 1809 or later (required by Microsoft Store)
  minVersion: "10.0.17763.0"
  maxVersionTested: "10.0.22621.0"

  # Languages
  languages:
    - en-US

  # Force .msix extension (required for Microsoft Store code signing)
  artifactName: ${productName}-${version}.msix

# ============================================
# LINUX CONFIGURATION
# ============================================
linux:
  target:
    - target: AppImage
      arch: [x64]
    - target: deb
      arch: [x64]
    - target: rpm
      arch: [x64]
  icon: build/icons
  category: Utility
  synopsis: Enrich your OpenNumismat collection with Numista data
  description: >
    NumiSync Wizard helps coin collectors enrich their OpenNumismat
    database with pricing and catalog information from Numista.

deb:
  depends:
    - libgtk-3-0
    - libnotify4
    - libnss3
    - libxss1
    - libxtst6
    - xdg-utils
    - libatspi2.0-0
    - libuuid1
    - libsecret-1-0

rpm:
  depends:
    - gtk3
    - libnotify
    - nss
    - libXScrnSaver
    - libXtst
    - xdg-utils
    - at-spi2-core
    - libuuid

appImage:
  license: EULA.txt

# ============================================
# MACOS CONFIGURATION (Unsigned)
# ============================================
mac:
  target:
    - target: dmg
      arch: [x64, arm64]
  icon: build/icon.icns
  category: public.app-category.utilities

dmg:
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications

# Publish configuration for auto-updates (GitHub releases)
publish:
  - provider: github
    owner: inguy24
    repo: Numisync-Wizard
    releaseType: release

# asar packaging for better performance
asar: true
asarUnpack:
  - "**/*.node"
